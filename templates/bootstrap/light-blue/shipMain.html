{% extends "bootstrap/light-blue/base.html" %}
{% load static %}

{% block head %}
{{block.super}}
{% endblock head %}

{% block sidebar %}
{{block.super}}
{% endblock sidebar %}

{% block pre-content %}
{{block.super}}
<div class="modal fade" id="user-login">
    <div class="modal-dialog">
        <div class="modal-content" tabindex="-1" role="dialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">X</button>
                <h3>Pilot Login</h3>
            </div>
            <div class="modal-body">
                <form name='login-form' id='login-form' method='POST' action='/users/login/'>
                    {{ loginForm.as_p}}
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" aria-hidden="true" onclick="submitUserLogin()">Submit</button>
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="user-newuser">
    <div class="modal-dialog">
        <div class="modal-content" tabindex="-1" role="dialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">X</button>
                <h3>Create New Pilot</h3>
            </div>
            <div class="modal-body">
                <form name='newuser-form' id='newuser-form' method='POST' action='/users/create/'>
                    {{ createUserForm.as_p}}
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" aria-hidden="true" onclick="submitNewUser()">Submit</button>
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="quick-variant">
    <div class="modal-dialog">
        <div class="modal-content" tabindex="-1" role="dialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">X</button>
                <h3>QuickVariant</h3>
            </div>
            <div class="modal-body">
                <h5>Here is Your Quick Variant URL</h5>
                <p>This URL is a snapshot of this current ship configuration.  It is static and will always display exactly what you see now.  If you make changes to this configuration you will need to request a new link.</p>
                <div id="quickvariant-url"></div>        
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" aria-hidden="true" onclick="gotoQuickVariant()">Go To QuickVariant</button>
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="item-details-modal">
    <div class="modal-dialog">
        <div class="modal-content" tabindex="-1" role="dialog">
            <div class="modal-header">
                <h3 id="item-details-itemname">Item Name</h3>
            </div>
            <div class="modal-body">
                <div id="item-details-body">
                    <table class="table" id="item-details-basics">
                        <tbody>
                        <tr class="label-inverse">
                            <td>Class</td>
                            <td id="item-details-itemclass"></td>
                            <td>Size</td>
                            <td id="item-details-itemsize"></td>
                        </tr>
                        </tbody>
                    </table>
                    <div>
                    <span id="item-details-itemtype"></span><span>: </span><span id="item-details-itemsubtype"></span>
                    </div>
                    <div id="item-details-description">
                    </div>
                    <div id="item-details-weaponbars">
                    </div>
                    <div id="item-details-misc">
                    </div>
                    <header>
                        <h4 id="power-chart-header">Power</h4>
                    </header>
                    <div id="power-chart-line" class="chart">
                        <svg></svg>
                    </div>
                    <header>
                        <h4 id="heat-chart-header">Heat</h4>
                    </header>
                    <div id="heat-chart-line" class="chart">
                        <svg></svg>
                    </div>
                    <header>
                        <h4 id="avionics-chart-header">Avionics</h4>
                    </header>
                    <div id="avionics-chart-line" class="chart">
                        <svg></svg>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="itemport-details-modal">
    <div class="modal-dialog">
        <div class="modal-content" tabindex="-1" role="dialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" >Ã—</button>
                <h4 id="itemport-details-name">Itemport Name</h4>
            </div>
            <div class="modal-body">
                <div id="itemport-details-body">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock pre-content %}

{% block page-header %}Workshop{% endblock page-header %}
        {% block main-content %}
        <div class="row-fluid">
            <div class="col-lg-9" id="ship-images">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h2 class="page-title">{% block page-title %}{{shipData.displayName}}{% endblock page-title %}</h2>
                    </div>
                    <div class="panel-body">
                            <ul id="layout-images" class="nav nav-pills">
                                <li class="dropdown active">
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Main Hardpoints <b class="caret"></b></a>
                                    <ul id="main-hardpoint-images" class="dropdown-menu">
                                        <li><a href="#image-topright" data-toggle="pill">Top Right</a></li>
                                        <li><a href="#image-topleft" data-toggle="pill">Top Left</a></li>
                                        <li><a href="#image-bottomright" data-toggle="pill">Bottom Right</a></li>
                                        <li><a href="#image-bottomleft" data-toggle="pill">Bottom Left</a></li>
                                    </ul>
                                </li>
                                <li><a href="#hardpoints-overview" data-toggle="pill">All Hardpoints</a></li>
                            </ul>
                            <div id="layout-images-content" class="tab-content">
                                <div class="tab-pane fade in active" id="image-topright">
                                    <div style="position:relative">
                                        <image src="{{shipData.layoutImageTopRight}}" class="col-lg-12"></image>
                                        {% for port in shipData.itemport_set.all %}
                                            {% if port.parentImage == 1%}
                                            <div class="item-port {%for type in port.supportedTypes.all%}{{type.typeName}} {%endfor%}" style="left:{{port.tagLocationX}}%;top:{{port.tagLocationY}}%;" data-types="{%for type in port.supportedTypes.all%}{{type.typeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-subtypes="{%for type in port.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-min-size={{port.minSize}} data-max-size={{port.maxSize}} id="{{port.name}}" data-parent={{port.parentImage}}></div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="image-topleft">
                                    <div style="position:relative">
                                        <image src="{{shipData.layoutImageTopLeft}}" class="col-lg-12"></image>
                                        {% for port in shipData.itemport_set.all %}
                                            {% if port.parentImage == 2%}
                                            <div class="item-port {%for type in port.supportedTypes.all%}{{type.typeName}} {%endfor%}" style="left:{{port.tagLocationX}}%;top:{{port.tagLocationY}}%;" data-types="{%for type in port.supportedTypes.all%}{{type.typeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-subtypes="{%for type in port.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-min-size={{port.minSize}} data-max-size={{port.maxSize}} id="{{port.name}}" data-parent={{port.parentImage}}></div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="image-bottomright">
                                    <div style="position:relative">
                                        <image src="{{shipData.layoutImageBottomRight}}" class="col-lg-12"></image>
                                        {% for port in shipData.itemport_set.all %}
                                            {% if port.parentImage == 3%}
                                            <div class="item-port {%for type in port.supportedTypes.all%}{{type.typeName}} {%endfor%}" style="left:{{port.tagLocationX}}%;top:{{port.tagLocationY}}%;" data-types="{%for type in port.supportedTypes.all%}{{type.typeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-subtypes="{%for type in port.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-min-size={{port.minSize}} data-max-size={{port.maxSize}} id="{{port.name}}" data-parent={{port.parentImage}}></div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="image-bottomleft">
                                    <div style="position:relative">
                                        <image src="{{shipData.layoutImageBottomLeft}}" class="col-lg-12"></image>
                                        {% for port in shipData.itemport_set.all %}
                                            {% if port.parentImage == 4%}
                                            <div class="item-port {%for type in port.supportedTypes.all%}{{type.typeName}} {%endfor%}" style="left:{{port.tagLocationX}}%;top:{{port.tagLocationY}}%;" data-types="{%for type in port.supportedTypes.all%}{{type.typeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-subtypes="{%for type in port.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}" data-min-size={{port.minSize}} data-max-size={{port.maxSize}} id="{{port.name}}" data-parent={{port.parentImage}}></div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="hardpoints-overview">
                                    {% for itemPort in shipData.itemport_set.all %}
                                        <div class="col-lg-3">
        <!-- {{itemPort.supportedTypes.all}} -->
        <div class="panel panel-compact
        {% for type in itemPort.supportedTypes.all %}
        {% if "PowerPlant" in type.typeName %}
         panel-danger
        {% endif %}
        {% if "Thruster" in type.typeName %}
         panel-danger
        {% else %}
         panel-warning
        {% endif %}
        {% endfor %}
        " data-state="empty"
        {% for type in itemPort.supportedTypes.all %}
        {% if "PowerPlant" in type.typeName %}
          data-status="danger"
        {% endif %}
        {% if "Thruster" in type.typeName %}
          data-status="danger"
        {% else %}
          data-status="warning"
        {% endif %}
        {% endfor %}>
            <div class="panel-heading">
                <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
            </div>
            <div class="panel-body">
                <div class="well well-compact item-port-datablock" 
                    data-port-name="{{itemPort.name}}" 
                    data-parent={{itemPort.parentImage}} 
                    data-types="{%for type in itemPort.supportedTypes.all%}{{type.typeName}}{%if not forloop.last %},{%endif%}{%endfor%}" 
                    data-min-size={{itemPort.minSize}} 
                    data-max-size={{itemPort.maxSize}} 
                    data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"
                    data-parent-vehicle="{{shipData.name}}">
                    <div class="item-port-datablock-statebuttons">
                        <input id="item-powerstate-{{itemPort.name}}-input" type="hidden" name="item-powerstate" value="Default">
                        <div class="btn-group" id="port-powerstate-{{itemPort.name}}" data-toggle="buttons-radio" data-target="item-powerstate-{{itemPort.name}}-input">
                            <button class="btn btn-xs btn-info active noop" data-toggle-class="btn-info" data-toggle-passive-class="btn-inverse" type="button" value="Default">Default</button>
                        </div>
                    </div>
                    <br>
                    <span class="item-name">Nothing Loaded</span>
                </div>
            </div>
            <div class="panel-footer">{{shipData.displayName}}</div>
        </div>

                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                    </div>
                </div>
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h4>Systems Monitor & Calibration</h4>
                    </div>
                    <div class="panel-body">
                        <div class="tabbable">
                            <ul id="systems-monitor" class="nav nav-tabs">
                                <li class="active"><a href="#systems-overview" data-toggle="tab">Snapshot</a></li>
                                <li><a href="#systems-livestats" data-toggle="tab">LiveStats</a></li>
                            </ul>
                            <div id="systems-monitor-content" class="tab-content">
                                <div id="systems-overview" class="tab-pane fade in active">
                                    <h4>Systems Snapshot provides a snapshot of vehicle resources</h4>
                                    <p>The systems snapshot provides a quick look at vehicle resource usage based on all modules running in the default or active state.  For more detailed diagnostics turn to the LiveStats Diagnostic System</p>
                                    <h5>Power Consumption: <strong><span id="stats-available-power-label">0</span></strong></h5>
                                    <p id="stats-warning-missingpowerplant"><span class="label label-danger">Warning No Powerplant equipped</span></p>
                                    <div class="progress" id="stats-available-power-container">
                                        <div class="progress-bar progress-bar-success" style="width:0%;" id="stats-available-power-bar">
                                        </div>
                                    </div>
                                </div>
                                <div id="systems-livestats" class="tab-pane fade">
                                    <h4>The MobiGlas patented LiveStats Diagnostic System (LDS) provides detailed statistics on vehicle resource usage</h4>
                                    <p>Designed to operate in conjunction with the Systems Overview panel, LDS can give you down to the second reporting on resource usage based on individual hardpoint states.  As you change hardpoint states in the Systems Overview, LDS will update in realtime.  Never be caught off guard with MobiGlas LDS.</p>
                                    <h5>Power Consumption: <strong><span id="stats-lds-available-power-label">0</span></strong></h5>
                                    <p id="stats-lds-warning-missingpowerplant"><span class="label label-danger">Warning No Powerplant equipped</span></p>
                                    <div class="progress" id="stats-lds-available-power-container">
                                        <div class="progress-bar progress-bar-success" style="width:0%;" id="stats-lds-available-power-bar">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h4>Compatible Items</h4>
                    </div>
                    <div class="panel-body">
                        <div class="tabbable tabs-right">
                            <ul id="items-list" class="nav nav-pills nav-stacked">
                                <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Select Category <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li class="active"><a class="type-select" href="#hardpoints-Weapon" data-toggle="tab">Weapons</a></li>
                                    <li><a class="type-select" href="#hardpoints-Thruster" data-toggle="tab">Thrusters</a></li>
                                    <li><a class="type-select" href="#hardpoints-PowerPlant" data-toggle="tab">Powerplant</a></li>
                                    <li><a class="type-select" href="#hardpoints-Container" data-toggle="tab">Cargo</a></li>
                                    <li><a class="type-select" href="#hardpoints-Avionics" data-toggle="tab">Avionics</a></li>
                                    <li><a class="type-select" href="#hardpoints-Battery" data-toggle="tab">Batteries</a></li>
                                    <li><a class="type-select" href="#hardpoints-Cooler" data-toggle="tab">Coolers</a></li>
                                    <li><a class="type-select" href="#hardpoints-Display" data-toggle="tab">Displays</a></li>
                                    <li><a class="type-select" href="#hardpoints-Radar" data-toggle="tab">Radars</a></li>
                                </ul>
                                </li>
                            </ul>
                            <div id="items-list-content" class="tab-content">
                                <div id="hardpoints-Weapon" class="tab-pane fade in active">
                                    <div id="table-dynamic-Weapon"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    <p><span class="label-highlight">Use Systems Overview to see all hardpoints at once</span></p>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Weapon" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
        

                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Thruster" class="tab-pane fade">
                                    <div id="table-dynamic-Thruster"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Thruster" %}
    <div class="panel panel-danger panel-compact" data-state="empty" data-status="danger">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-PowerPlant" class="tab-pane fade">
                                    <div id="table-dynamic-PowerPlant"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "PowerPlant" %}
    <div class="panel panel-danger panel-compact" data-state="empty" data-status="danger">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Container" class="tab-pane fade">
                                    <div id="table-dynamic-Container"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Container" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Avionics" class="tab-pane fade">
                                    <div id="table-dynamic-Avionics"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Avionics" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Battery" class="tab-pane fade">
                                    <div id="table-dynamic-Battery"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Battery" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Cooler" class="tab-pane fade">
                                    <div id="table-dynamic-Cooler"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Cooler" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Display" class="tab-pane fade">
                                    <div id="table-dynamic-Display"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Display" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <div id="hardpoints-Radar" class="tab-pane fade">
                                    <div id="table-dynamic-Radar"></div>
                                    <div></div>
                                    <h4>Hardpoints</h4>
                                    {% for itemPort in shipData.itemport_set.all %}
                                        {% if itemPort.parentImage > 0 %}
                                            {% for itemType in itemPort.supportedTypes.all %}
                                                {% if itemType.typeName == "Radar" %}
    <div class="panel panel-warning panel-compact" data-state="empty" data-status="warning">
        <div class="panel-heading">
            <h5>{% firstof itemPort.displayName itemPort.name %}</h5>
        </div>
        <div class="panel-body">
            <div class="well well-compact item-port-label" data-port-name="{{itemPort.name}}" data-parent={{itemPort.parentImage}} data-min-size={{itemPort.minSize}} data-max-size={{itemPort.maxSize}} data-subtypes="{%for type in itemPort.supportedSubTypes.all%}{{type.subTypeName}}{%if not forloop.last %},{%endif%}{%endfor%}"><span class="item-name">Nothing Loaded</span></div>
        </div>
    </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row-fluid">
        </div>
        {% endblock main-content %}


{% block ready-script %}

{{ block.super }}
/******************************************************************************
// Set up Dynamic Tables (Backgrid)
******************************************************************************/
createGrid("Avionics","{{shipData.name}}", $("#table-dynamic-Avionics"));
createGrid("Battery","{{shipData.name}}", $("#table-dynamic-Battery"));
createGrid("Container","{{shipData.name}}", $("#table-dynamic-Container"));
createGrid("Cooler","{{shipData.name}}", $("#table-dynamic-Cooler"));
createGrid("Display","{{shipData.name}}", $("#table-dynamic-Display"));
createGrid("Radar","{{shipData.name}}", $("#table-dynamic-Radar"));
createGrid("PowerPlant","{{shipData.name}}", $("#table-dynamic-PowerPlant"));
createGrid("Thruster","{{shipData.name}}", $("#table-dynamic-Thruster"));
createGrid("Weapon", "{{shipData.name}}", $("#table-dynamic-Weapon"));

/******************************************************************************
// Set up Modal Dialogs 
******************************************************************************/

$('#item-details-modal').modal({
    backdrop: true,
    show: false
})

$('#itemport-details-modal').modal({
    backdrop: true,
    show: false
})

$('#user-login').modal({
    backdrop: true,
    show: false
})

$('#user-newuser').modal({
    backdrop: true,
    show: false
})

$('#quick-variant').modal({
    backdrop: true,
    show: false    
})

/******************************************************************************
// Bind Events  
******************************************************************************/

$("a.type-select").on("click", function(e){
    var anchor = $(this).attr("href");
    var activeItemType = anchor.split("-")[1];
    toggleItemPorts(activeItemType);
});

Backbone.on("rowclicked", function (model) {
    console.log("Showing item details modal")
    getItemDetails(model.get("name"));
    chartPipe(model.get("name"), "Power", "All");
    chartPipe(model.get("name"), "Heat", "All");
    chartPipe(model.get("name"), "Avionics", "All");
    $("#itemport-details-modal").modal("hide");
    $("#item-details-modal").modal("show");
});        

$(".icon-remove").on("click", function(event){
    event.stopPropagation();
    var portWell = $(this).parent()
    var portName = portWell.attr("data-port-name");
    var parentPort = portWell.attr("data-parent-port");
    var parentItem = portWell.attr("data-parent-item");
    var portData = {"name" : portName, "parentPort":parentPort,"parentItem":parentItem};
    console.log(portData)
    removeItemFromPort(portData);
});

$(".item-port-label").hoverIntent({
        over: enterPortLabel,
        timeout: 100,
        out: leavePortLabel
    });

$(".item-port").hoverIntent({
        over: enterPort,
        timeout: 100,
        out: leavePort
    });

$(".item-port").on("click", function(event){
    var portName = $(this).attr("id");
    filterByItemPort(portName);
});

$(".icon-filter").on("click", function(event){
    event.stopPropagation();
    var portWell = $(this).parent()
    var portName = portWell.attr("data-port-name");
    filterByItemPort(portName);
});

$(".item-port-label").on("click", function(){
    $("#item-details-modal").modal("hide");
    $("#itemport-details-modal").modal("show");
    var portName = $(this).attr("data-port-name")
    getItemPortDetails({"name":portName}, "{{shipData.name}}");
});

$(".item-port-datablock").on("click", function(){
    $("#item-details-modal").modal("hide");
    $("#itemport-details-modal").modal("show");
    var portName = $(this).attr("data-port-name")
    var portData = {"name":portName,"parentItem":$(this).attr("data-parent-item")}
    getItemPortDetails(portData, "{{shipData.name}}");
});

$(document).on("mouseenter", "tr.vehicle-item-row", function(){
    $(this).draggable({
      revert: "invalid",
      containment: "document",
      helper: "clone",
      cursor: "move",
      delay: 100,
      distance: 5,
      zIndex: 100
    })
});

$("#user-action-login").on("click", function(event) {
    event.preventDefault();
    $("#user-login").modal("show");
});

$("#user-action-logout").on("click", function(event) {
    event.preventDefault();
    submitUserLogout();
});

$("#user-action-newuser").on("click", function(event) {
    event.preventDefault();
    $("#user-newuser").modal("show");
});

$("#system-action-quickvariant").on("click", function(event){
    event.preventDefault();
    getQuickVariant("{{shipData.name}}");
});

$("button.noop").click(function(event){
    $(this).parent().parent().find("input").val($(this).val());
    event.stopPropagation();
    computeStats();
});

toggleItemPorts("Weapon");
computeStats();

{% if user.is_authenticated %}
setUserState(true);
{% else %}
setUserState(false);
{% endif %}

{% endblock ready-script %}